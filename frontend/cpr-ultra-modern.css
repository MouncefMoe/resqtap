/* ==================== CPR ULTRA-MODERN OVERRIDE ==================== */
/* High Specificity AI-Themed CPR Guide Redesign */
/* CRITICAL: This file MUST load after cpr.css for proper override */

/* Force dark theme with AI gradients */
body.cpr-body,
html body {
    background: #0a0e1a !important;
    background-image:
        radial-gradient(at 20% 30%, rgba(99, 102, 241, 0.15) 0px, transparent 50%),
        radial-gradient(at 80% 70%, rgba(139, 92, 246, 0.12) 0px, transparent 50%) !important;
}

/* ==================== TYPE SELECTION CARDS (Adult/Child/Infant) ==================== */

body .cpr-shell .type-grid .type-card,
.type-card {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.08), rgba(139, 92, 246, 0.08)) !important;
    border: 2px solid transparent !important;
    position: relative !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
}

/* Animated gradient border */
body .cpr-shell .type-grid .type-card::before,
.type-card::before {
    content: '' !important;
    position: absolute !important;
    inset: -2px !important;
    border-radius: 18px !important;
    background: linear-gradient(135deg, #667eea, #764ba2) !important;
    z-index: -1 !important;
    opacity: 0 !important;
    transition: opacity 0.4s ease !important;
}

body .cpr-shell .type-grid .type-card:hover::before,
.type-card:hover::before {
    opacity: 1 !important;
}

body .cpr-shell .type-icon,
.type-icon {
    background: linear-gradient(135deg, #6366f1, #8b5cf6) !important;
    box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4) !important;
}

/* ==================== GUIDED MODE OVERLAY ==================== */

body .guided-overlay,
.guided-overlay {
    background: rgba(10, 14, 26, 0.98) !important;
    backdrop-filter: blur(24px) !important;
    -webkit-backdrop-filter: blur(24px) !important;
}

body .guided-panel,
.guided-panel {
    background: #0f1525 !important;
    background-image:
        radial-gradient(at 30% 20%, rgba(99, 102, 241, 0.12) 0px, transparent 50%),
        radial-gradient(at 70% 80%, rgba(139, 92, 246, 0.12) 0px, transparent 50%) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 24px 64px rgba(0, 0, 0, 0.6) !important;
}

/* ===== Guided Title with Gradient ===== */

body .guided-title,
.guided-title {
    background: linear-gradient(135deg, #6366f1, #8b5cf6, #d946ef) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
}

/* ==================== PULSE HEART (Enhanced 3D) ==================== */

body .guided-overlay .pulse-heart,
.pulse-heart {
    background: radial-gradient(circle at 30% 30%, #f472b6, #e11d48 60%) !important;
    box-shadow:
        0 0 60px rgba(239, 68, 68, 0.7) !important,
        0 0 120px rgba(244, 114, 182, 0.3) !important,
        inset 0 -30px 60px rgba(0, 0, 0, 0.3) !important;
}

/* Inner 3D highlight */
body .guided-overlay .pulse-heart::before,
.pulse-heart::before {
    content: '' !important;
    position: absolute !important;
    inset: 20px !important;
    border-radius: 50% !important;
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3), transparent 60%) !important;
    pointer-events: none !important;
}

/* Breath mode (blue) */
body .guided-overlay .pulse-heart.breath-mode,
.pulse-heart.breath-mode {
    background: radial-gradient(circle at 30% 30%, #60a5fa, #3b82f6 60%) !important;
    box-shadow:
        0 0 60px rgba(59, 130, 246, 0.7) !important,
        0 0 120px rgba(96, 165, 250, 0.3) !important,
        inset 0 -30px 60px rgba(0, 0, 0, 0.3) !important;
}

/* Voice speaking indicator (purple glow) */
body .guided-overlay .voice-speaking,
.voice-speaking {
    animation: voicePulseUltra 0.6s ease-in-out infinite !important;
}

@keyframes voicePulseUltra {
    0%, 100% {
        box-shadow:
            0 0 60px rgba(139, 92, 246, 0.9),
            0 0 120px rgba(139, 92, 246, 0.6),
            inset 0 -30px 60px rgba(0, 0, 0, 0.3);
    }
    50% {
        box-shadow:
            0 0 100px rgba(139, 92, 246, 1),
            0 0 160px rgba(139, 92, 246, 0.8),
            inset 0 -30px 60px rgba(0, 0, 0, 0.3);
    }
}

/* ===== Pulse Rings (Staggered Animation) ===== */

body .pulse-ring,
.pulse-ring {
    border-color: rgba(99, 102, 241, 0.4) !important;
}

body .pulse-ring-2,
.pulse-ring-2 {
    border-color: rgba(139, 92, 246, 0.3) !important;
}

body .pulse-ring-3,
.pulse-ring-3 {
    border-color: rgba(217, 70, 239, 0.2) !important;
}

/* ===== Pulse Count (Larger, Clearer) ===== */

body .pulse-count,
.pulse-count {
    font-size: 56px !important;
    font-weight: 900 !important;
    text-shadow:
        0 4px 12px rgba(0, 0, 0, 0.6) !important,
        0 0 30px rgba(255, 255, 255, 0.4) !important;
}

/* ==================== CONTROL PANEL (Glassmorphic) ==================== */

body .guided-meta,
.guided-meta {
    background: rgba(255, 255, 255, 0.04) !important;
    backdrop-filter: blur(16px) !important;
    -webkit-backdrop-filter: blur(16px) !important;
    border: 1px solid rgba(255, 255, 255, 0.08) !important;
    border-radius: 16px !important;
}

/* ===== Toggles with Gradient Track ===== */

body .toggle,
.toggle {
    background: rgba(255, 255, 255, 0.06) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 9999px !important;
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
    transition: all 0.3s ease !important;
}

body .toggle:hover,
.toggle:hover {
    background: rgba(255, 255, 255, 0.1) !important;
    border-color: rgba(255, 255, 255, 0.15) !important;
}

body .toggle input[type="checkbox"],
.toggle input[type="checkbox"] {
    accent-color: #6366f1 !important;
}

/* ==================== BUTTONS (Gradient & Glow) ==================== */

body .nav-btn.primary,
.nav-btn.primary {
    background: linear-gradient(135deg, #6366f1, #8b5cf6) !important;
    border: none !important;
    box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4) !important;
}

body .nav-btn.primary:hover,
.nav-btn.primary:hover {
    box-shadow: 0 12px 32px rgba(99, 102, 241, 0.5) !important;
    transform: translateY(-2px) !important;
}

body .nav-btn.danger,
.nav-btn.danger {
    background: linear-gradient(135deg, #f43f5e, #dc2626) !important;
    box-shadow: 0 8px 24px rgba(239, 68, 68, 0.4) !important;
}

body .nav-btn.danger:hover,
.nav-btn.danger:hover {
    box-shadow: 0 12px 32px rgba(239, 68, 68, 0.5) !important;
}

body .nav-btn.ghost,
.nav-btn.ghost {
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid rgba(255, 255, 255, 0.12) !important;
}

body .nav-btn.ghost:hover,
.nav-btn.ghost:hover {
    background: rgba(255, 255, 255, 0.1) !important;
}

/* ==================== PRECHECK SCREEN ==================== */

body .precheck,
.precheck {
    background: rgba(99, 102, 241, 0.08) !important;
    border: 1px solid rgba(99, 102, 241, 0.2) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
}

body .checklist li::marker,
.checklist li::marker {
    color: #6366f1 !important;
}

/* ==================== COUNTDOWN (Gradient Shift) ==================== */

body .guided-countdown,
.guided-countdown {
    background: linear-gradient(135deg, #6366f1, #8b5cf6, #d946ef) !important;
    border: none !important;
    animation: pulseGlow 1s ease-in-out infinite !important;
}

@keyframes pulseGlow {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 8px 32px rgba(99, 102, 241, 0.4);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 12px 48px rgba(99, 102, 241, 0.6);
    }
}

body .countdown-number,
.countdown-number {
    font-size: 72px !important;
    font-weight: 900 !important;
    text-shadow: 0 8px 24px rgba(0, 0, 0, 0.4) !important;
    animation: scaleRotate 1s ease-in-out !important;
}

@keyframes scaleRotate {
    0% {
        transform: scale(0.8) rotate(-10deg);
        opacity: 0;
    }
    50% {
        transform: scale(1.1) rotate(5deg);
    }
    100% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
    }
}

/* ==================== BPM & DEPTH INDICATORS ==================== */

body .bpm-accuracy,
.bpm-accuracy {
    background: rgba(16, 185, 129, 0.1) !important;
    border: 2px solid rgba(16, 185, 129, 0.3) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
}

body .depth-fill,
.depth-fill {
    background: linear-gradient(90deg, #10b981, #34d399) !important;
    box-shadow: 0 0 12px rgba(16, 185, 129, 0.6) !important;
}

body .depth-fill.warning,
.depth-fill.warning {
    background: linear-gradient(90deg, #f59e0b, #fbbf24) !important;
    box-shadow: 0 0 12px rgba(245, 158, 11, 0.6) !important;
}

body .depth-fill.danger,
.depth-fill.danger {
    background: linear-gradient(90deg, #ef4444, #f87171) !important;
    box-shadow: 0 0 12px rgba(239, 68, 68, 0.6) !important;
}

/* ==================== SESSION SUMMARY ==================== */

body .session-summary,
.session-summary {
    background: linear-gradient(135deg, #6366f1, #8b5cf6, #d946ef) !important;
    border: none !important;
    box-shadow: 0 16px 48px rgba(99, 102, 241, 0.4) !important;
}

body .summary-stat,
.summary-stat {
    background: rgba(255, 255, 255, 0.15) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
}

/* ==================== STOP CONFIRM ==================== */

body .stop-confirm,
.stop-confirm {
    background: rgba(239, 68, 68, 0.1) !important;
    border: 1px solid rgba(239, 68, 68, 0.3) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
}

/* ==================== ICON BUTTON ==================== */

body .icon-btn,
.icon-btn {
    background: rgba(255, 255, 255, 0.05) !important;
    border: 1px solid rgba(255, 255, 255, 0.12) !important;
    transition: all 0.3s ease !important;
}

body .icon-btn:hover,
.icon-btn:hover {
    background: rgba(255, 255, 255, 0.1) !important;
    transform: rotate(90deg) !important;
}

/* ==================== TEXT COLOR OVERRIDES ==================== */

body .type-title,
.type-title {
    color: #f8fafc !important;
}

body .type-subtitle,
.type-subtitle {
    color: #94a3b8 !important;
}

body .step-number,
.step-number {
    color: #6366f1 !important;
}

body .step-title,
.step-title {
    color: #f8fafc !important;
}

body .step-hint,
.step-hint {
    color: #cbd5e1 !important;
}

body .step-counter,
.step-counter {
    color: #94a3b8 !important;
}

body .instructions,
.instructions {
    color: #cbd5e1 !important;
}

body .instructions li,
.instructions li {
    color: #cbd5e1 !important;
}

body .progress-row,
.progress-row {
    color: #94a3b8 !important;
}

body .progress-row span,
.progress-row span {
    color: #94a3b8 !important;
}

body .nav-status,
.nav-status {
    color: #cbd5e1 !important;
}

body .guided-sub,
.guided-sub {
    color: #cbd5e1 !important;
}

body .eyebrow,
.eyebrow {
    color: #94a3b8 !important;
}

body .precheck-title,
.precheck-title {
    color: #f8fafc !important;
}

body .checklist,
.checklist {
    color: #cbd5e1 !important;
}

body .checklist li,
.checklist li {
    color: #cbd5e1 !important;
}

/* ==================== IMAGE SIZE OPTIMIZATION ==================== */

body .media-wrap,
.media-wrap {
    min-height: 160px !important;
    max-height: 200px !important;
}

body .step-card,
.step-card {
    min-height: auto !important;
}

body .step-image,
body .media-wrap img,
.step-image,
.media-wrap img {
    width: 100% !important;
    height: 100% !important;
    max-height: 200px !important;
    object-fit: contain !important;
}

/* ==================== RESPONSIVE ==================== */

@media (max-width: 768px) {
    body .pulse-count,
    .pulse-count {
        font-size: 48px !important;
    }

    body .countdown-number,
    .countdown-number {
        font-size: 60px !important;
    }

    /* Mobile image size fixes */
    body .media-wrap,
    .media-wrap {
        min-height: 140px !important;
        max-height: 160px !important;
    }

    body .step-card,
    .step-card {
        min-height: auto !important;
        padding: 16px !important;
    }

    body .step-image,
    .step-image {
        max-height: 160px !important;
        object-fit: contain !important;
    }
}

/* ==================== ACCESSIBILITY ==================== */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* ==================== PERFORMANCE ==================== */

body .pulse-heart,
body .guided-panel,
body .nav-btn,
.pulse-heart,
.guided-panel,
.nav-btn {
    will-change: transform !important;
    transform: translateZ(0) !important; /* Force GPU acceleration */
}

/* ==================== HOME BUTTON STYLING ==================== */

body .ghost-link,
.ghost-link {
    display: inline-flex !important;
    align-items: center !important;
    gap: 8px !important;
    padding: 12px 24px !important;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.15)) !important;
    border: 2px solid rgba(99, 102, 241, 0.3) !important;
    border-radius: 16px !important;
    color: #f8fafc !important;
    font-weight: 600 !important;
    font-size: 15px !important;
    text-decoration: none !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    box-shadow: 0 4px 16px rgba(99, 102, 241, 0.2) !important;
    transition: all 0.3s ease !important;
    position: relative !important;
    overflow: hidden !important;
}

body .ghost-link::before,
.ghost-link::before {
    content: '' !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    width: 0 !important;
    height: 0 !important;
    border-radius: 50% !important;
    background: rgba(255, 255, 255, 0.1) !important;
    transform: translate(-50%, -50%) !important;
    transition: width 0.4s ease, height 0.4s ease !important;
}

body .ghost-link:hover,
.ghost-link:hover {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.25), rgba(139, 92, 246, 0.25)) !important;
    border-color: rgba(99, 102, 241, 0.5) !important;
    box-shadow: 0 6px 24px rgba(99, 102, 241, 0.4) !important;
    transform: translateY(-2px) !important;
}

body .ghost-link:hover::before,
.ghost-link:hover::before {
    width: 200% !important;
    height: 200% !important;
}

body .ghost-link:active,
.ghost-link:active {
    transform: translateY(0) !important;
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3) !important;
}

body .ghost-link span[aria-hidden="true"],
.ghost-link span[aria-hidden="true"] {
    font-size: 18px !important;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3)) !important;
}
